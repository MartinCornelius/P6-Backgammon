name: Auto test when pushing to main

on:
    push:
        branches:
            - main

jobs:
    run-tests:
        name: Run Tests
        runs-on: ubuntu-latest

        steps:
            - uses: actions/checkout@v4
            - name: Setup dotnet
              uses: actions/setup-dotnet@v3
              with:
                dotnet-version: '6.0.x'
            - uses: actions/cache@v3
              with:
                path: ~/.nuget/packages
                # Look to see if there is a cache hit for the corresponding requirements file
                key: ${{ runner.os }}-nuget-${{ hashFiles('**/*.csproj') }}
                restore-keys: |
                  ${{ runner.os }}-nuget
            - name: Install dependencies
              run: dotnet restore
            - name: Test with the dotnet CLI
              run: dotnet test